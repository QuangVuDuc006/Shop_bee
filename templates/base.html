<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>{{ global_shop_info.shop_name }}</title>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <div class="topbar">
        <div class="topbar-left">
            <a href="#">KÃªnh NgÆ°á»i BÃ¡n</a>
                <span>|</span>
                <a href="#">Táº£i á»©ng dá»¥ng</a>
                <span>|</span>
                <a href="{{ url_for('distributors') }}">NhÃ  phÃ¢n phá»‘i</a> {# THÃŠM LINK NÃ€Y #}
                <span>|</span>
                <span>Káº¿t ná»‘i</span>
            <a href="https://www.facebook.com/quang.vu.uc.579118" target="_blank">
                <img src="{{ url_for('static', filename='facebook.png') }}" class="social-icon" alt="Facebook">
            </a>
            <a href="https://zalo.me/0399109399" target="_blank">
                <img src="{{ url_for('static', filename='zalo.png') }}" class="social-icon" alt="Zalo">
            </a>
        </div>
        <div class="topbar-right">
            {% if session.get('user') %}
                <div class="balance-info">
                    {% if user_balance is defined %}
                        Sá»‘ dÆ°: <span class="balance-amount">{{ "{:,.0f}".format(user_balance or 0) }}</span> VNÄ
                    {% else %}
                        Sá»‘ dÆ°: <span class="balance-amount">0</span> VNÄ
                    {% endif %}
                </div>
                <span>ğŸ‘‹ Xin chÃ o, {{ session['user'] }}</span>
                <a href="{{ url_for('logout') }}">ÄÄƒng xuáº¥t</a>
            {% else %}
                <a href="{{ url_for('login') }}">ÄÄƒng Nháº­p</a>
                <a href="{{ url_for('register') }}">ÄÄƒng KÃ½</a>
            {% endif %}
        </div>
    </div>

    <nav class="navbar">
        <div class="navbar-left">
            <div class="logo-slogan">
                <a href="{{ url_for('home') }}" class="logo">
                    {# LUÃ”N DÃ™NG LOGO CHÃNH (logo.png) CHO NAVBAR #}
                    <img src="{{ url_for('static', filename='logo.png') }}" alt="{{ global_shop_info.shop_name }} Logo" class="logo-img">
                </a>
                <div class="logo-divider"></div>
                <span class="slogan">Mua sáº¯m tháº£ ga <br> KhÃ´ng lo vá» giÃ¡</span>
            </div>
        </div>

        {% if request.path not in ['/login', '/register'] %}
        <div class="navbar-center">
            <input type="text" placeholder="Click vÃ o Ä‘Ã¢y - TÃ¬m kiáº¿m vÃ´ vÃ n" class="search-box">
            <button class="search-btn">ğŸ”</button>
        </div>

        <div class="navbar-right">
  <div class="cart-wrapper">
    <a href="{{ url_for('cart') }}" class="cart-icon">
      ğŸ›’
      <span class="cart-badge {% if cart_count == 0 %}hidden{% endif %}">{{ cart_count }}</span>
    </a>
  </div>
</div>

        {% endif %}
    </nav>

    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="bottom-flash-container">
        {% for message in messages %}
        <div class="bottom-flash">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <div class="main-content">
        {% block content %}{% endblock %}
    </div>

    <div id="toast" class="toast-message">ğŸ›’ ÄÃ£ thÃªm vÃ o giá» hÃ ng!</div>

    <script>
        // Flash message tá»± Ä‘á»™ng biáº¿n máº¥t
        setTimeout(() => {
            document.querySelectorAll('.bottom-flash').forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                setTimeout(() => el.remove(), 500);
            });
        }, 2000);
    </script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>


</body>
</html>