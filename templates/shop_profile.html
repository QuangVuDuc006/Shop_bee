{% extends "base.html" %}

{% block content %}
<div class="shop-profile-container">
    <div class="shop-profile-header">
        {% if shop_info.shop_avatar %}
            <img src="{{ url_for('static', filename='shop_assets/' + shop_info.shop_avatar) }}" alt="{{ shop_info.shop_name }} Avatar" class="shop-profile-avatar">
        {% else %}
            <img src="{{ url_for('static', filename='shop_assets/default_shop_avatar.png') }}" alt="Default Shop Avatar" class="shop-profile-avatar">
        {% endif %}
        <h1 class="shop-profile-name">{{ shop_info.shop_name }}</h1>
        <p class="shop-profile-slogan">Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi c·ª≠a h√†ng c·ªßa ch√∫ng t√¥i!</p>
    </div>

    <div class="shop-profile-details">
        <h2>Th√¥ng tin li√™n h·ªá:</h2>
        <p><strong>Hotline:</strong> {{ shop_info.hotline }}</p>
        <p><strong>Email:</strong> {{ shop_info.email }}</p>
        <p><strong>ƒê·ªãa ch·ªâ:</strong> {{ shop_info.address }}</p>
        
        {# C·∫¨P NH·∫¨T: Th√™m ƒëi·ªÅu ki·ªán ki·ªÉm tra chu·ªói r·ªóng b·∫±ng .strip() #}
        {% if shop_info.facebook_link and shop_info.facebook_link.strip() %}
        <p><strong>Facebook:</strong> <a href="{{ shop_info.facebook_link }}" target="_blank">{{ shop_info.facebook_link }}</a></p>
        {% endif %}
        
        {% if shop_info.zalo_link and shop_info.zalo_link.strip() %}
        <p><strong>Zalo:</strong> <a href="{{ shop_info.zalo_link }}" target="_blank">{{ shop_info.zalo_link }}</a></p>
        {% endif %}

        {% if shop_info.website_link and shop_info.website_link.strip() %} {# TH√äM PH·∫¶N N√ÄY CHO WEBSITE #}
        <p><strong>Website:</strong> <a href="{{ shop_info.website_link }}" target="_blank">{{ shop_info.website_link }}</a></p>
        {% endif %}
    </div>

    <div class="shop-products-section">
        <h2>S·∫£n ph·∫©m c·ªßa {{ shop_info.shop_name }}:</h2>
        {% if shop_products %}
            <div class="product-grid">
                {% for product in shop_products %}
                    <a href="{{ url_for('product_detail', product_id=product.id) }}" class="product-card-link">
                        <div class="product-card">
                            {% if product.image %}
                                <img src="{{ url_for('static', filename='images/' + product.image) }}" alt="{{ product.name }}" class="product-image">
                            {% else %}
                                <img src="{{ url_for('static', filename='images/default.jpg') }}" alt="·∫¢nh m·∫∑c ƒë·ªãnh" class="product-image">
                            {% endif %}
                            <h3>{{ product.name }}</h3>
                            <p>Gi√°: 
                                {% if product.variants %}
                                    {{ "{:,.0f}".format(product.variants[0].price) }} VNƒê
                                {% else %}
                                    Li√™n h·ªá
                                {% endif %}
                            </p>
                            <button type="button" class="add-to-cart-btn" data-product-id="{{ product.id }}">üõí Th√™m v√†o gi·ªè h√†ng</button>
                        </div>
                    </a>
                {% endfor %}
            </div>
        {% else %}
            <p>Shop n√†y hi·ªán ch∆∞a c√≥ s·∫£n ph·∫©m n√†o.</p>
        {% endif %}
    </div>
    
    <div class="back-home-link">
        <a href="{{ url_for('home') }}">‚¨ÖÔ∏è Quay v·ªÅ trang ch·ªß</a>
    </div>
</div>
{% endblock %}